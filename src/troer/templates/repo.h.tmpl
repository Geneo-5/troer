
#define ${pid.upper()}_MAX_PAYLOAD $getMaxSize()

${type} {
	char                *buf;
	MDB_env             *env;
	MDB_txn             *txn;
	struct stroll_lvstr  path;
	struct stroll_lvstr  backup;
	int                  flags;
	mode_t               mode;
};

extern int
${pre}open_${id}(${type} * repo, const char * path, int flags, mode_t mode)
 __${pre}nonull(1, 2) __warn_result;

extern int
${pid}_start(${type} * repo)
 __${pre}nonull(1);

extern int
${pid}_commit(${type} * repo)
 __${pre}nonull(1);

extern void
${pid}_abort(${type} * repo)
 __${pre}nonull(1);

extern void
${pre}close_${id}(${type} * repo)
 __${pre}nonull(1);

extern int
${pre}reload_${id}(${type} * repo)
 __${pre}nonull(1) __warn_result;

extern int
${pre}rollback_${id}(${type} * repo)
 __${pre}nonull(1) __warn_result;
#if $json

extern struct json_object *
${pid}_to_json(${type} * repo)
 __${pre}nonull(1) __warn_result;
#end if

#for $e in $entries:
${e.getDeclaration()}
#end for
## ex: filetype=c
