schema:
  const: exchange
rpc:
  type: array
  minItems: 1
  items:
    type: object
    required: [ name, value, type, roles ]
    unevaluatedProperties: false
    properties:
      name:
        $ref: '#/$defs/name'
      value:
        type: integer
        minimum: 0
      type:
        enum: [ request, notify, event ]
      roles:
        types: array
        minItems: 1
        items:
          $ref: '#/$defs/ref'
      request:
        $ref: '#/$defs/ref'
    allOf:
      - if:
          properties:
            type:
              const: request
        then:
          properties:
            response:
              $ref: '#/$defs/ref'

